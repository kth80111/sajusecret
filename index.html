import { useState } from 'react';
import Head from 'next/head';

export default function Home() {
  const [formData, setFormData] = useState({
    name: '', phone: '', email: '', birthdate: '',
    lunarSolar: 'ì–‘ë ¥', birthTime: 'ëª¨ë¦„', gender: 'ë‚¨',
    partnerGender: '', partnerBirthdate: '', partnerLunarSolar: 'ì–‘ë ¥', partnerBirthTime: 'ëª¨ë¦„',
    userQuestion: ''
  });
  const [result, setResult] = useState('');

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData({ ...formData, [name]: value });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    const response = await fetch('/api/analyze', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(formData),
    });
    const data = await response.json();
    setResult(data.result);
  };

  return (
    <>
      <Head>
        <title>ì‚¬ì£¼ì˜ ë¹„ë°€ sajusecret.com</title>
      </Head>
      <main style={{ textAlign: 'center', marginTop: '50px' }}>
        <h1>ğŸ”® ì‚¬ì£¼ì˜ ë¹„ë°€ sajusecret.com ğŸ”®</h1>
        <form onSubmit={handleSubmit}>
          <input name="name" placeholder="ì´ë¦„" onChange={handleChange} required /><br />
          <input name="phone" placeholder="ì—°ë½ì²˜" onChange={handleChange} required /><br />
          <input name="email" placeholder="ì´ë©”ì¼" onChange={handleChange} required /><br />
          <input name="birthdate" type="date" onChange={handleChange} required /><br />
          <select name="lunarSolar" onChange={handleChange}>
            <option value="ì–‘ë ¥">ì–‘ë ¥</option>
            <option value="ìŒë ¥">ìŒë ¥</option>
          </select><br />
          <select name="birthTime" onChange={handleChange}>
            {["ëª¨ë¦„", "ìì‹œ", "ì¶•ì‹œ", "ì¸ì‹œ", "ë¬˜ì‹œ", "ì§„ì‹œ", "ì‚¬ì‹œ", "ì˜¤ì‹œ", "ë¯¸ì‹œ", "ì‹ ì‹œ", "ìœ ì‹œ", "ìˆ ì‹œ", "í•´ì‹œ"].map(time => (
              <option key={time} value={time}>{time}</option>
            ))}
          </select><br />
          <select name="gender" onChange={handleChange}>
            <option value="ë‚¨">ë‚¨</option>
            <option value="ì—¬">ì—¬</option>
          </select><br />
          <textarea name="userQuestion" placeholder="ê¶ê¸ˆí•œ ì  (ì„ íƒ)" onChange={handleChange}></textarea><br />
          <button type="submit">ì‚¬ì£¼ í•´ì„ ë³´ê¸°</button>
        </form>
        {result && (
          <div style={{ marginTop: '30px', whiteSpace: 'pre-line' }}>
            <h2>ğŸ” í•´ì„ ê²°ê³¼</h2>
            <p>{result}</p>
          </div>
        )}
      </main>
    </>
  );
}
